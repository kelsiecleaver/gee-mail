
<html>
  <head>
    <script src="js/mail-generator.js"></script>
    <link href="css/style.css" rel="stylesheet" media="screen">
    <link href="https://fonts.googleapis.com/css?family=Dancing+Script" rel="stylesheet">
 <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet"> 


    <title>Gee-Mail Challenge</title>
    <script>

      window.onload = function(){

  var sum = document.getElementById("inboxCounter");
      sum.innerHTML =  geemails.length;


     for(var i = 0; i <window.geemails.length; i++){
          var dateBox = document.createElement("div");
          dateBox.className = "date"
          dateBox.innerHTML = window.geemails[i].date;
          main.appendChild(dateBox);

          var subjectBox = document.createElement("div");
          subjectBox.className = "subject";
          subjectBox.innerHTML = window.geemails[i].subject;
          dateBox.appendChild(subjectBox);

          var senderBox = document.createElement("div");
          senderBox.className = "sender";
          senderBox.innerHTML = window.geemails[i].sender;
          subjectBox.appendChild(senderBox);

          var bodyBox = document.createElement("div");
          bodyBox.className = "body";
          bodyBox.innerHTML = window.geemails[i].body;
          bodyBox.style.display = "none";
          senderBox.appendChild(bodyBox);
}
          var msgContent = document.getElementsByClassName("subject");
     //console.log(msgContent);
     for(var i =0; i<msgContent.length; i++){
      //console.log(msgContent[i]);

      msgContent[i].addEventListener("click", showBody);
        }

        function showBody(){
        var displayBody = this.querySelectorAll(".body")[0]
        if(displayBody.style.display === "none"){
        displayBody.style.display = "block";
        }else{
          displayBody.style.display = "none";
        }
      }
      }

      
    //console.log(getNewMessage())


      function addRandomMail(){
       var inboxData=getNewMessage();
       console.log(inboxData);

       var sum = document.getElementById("inboxCounter");
      sum.innerHTML =  geemails.length++;

       var dateBox = document.createElement("div");
      dateBox.className = "date";
      dateBox.innerHTML = inboxData.date;
      main.appendChild(dateBox);

      var subjectBox = document.createElement("div");
      subjectBox.className = "subject";
      subjectBox.innerHTML = inboxData.subject;
      dateBox.appendChild(subjectBox);

      var senderBox = document.createElement("div");
      senderBox.className = "sender";
      senderBox.innerHTML = inboxData.sender;
      subjectBox.appendChild(senderBox);

      var bodyBox = document.createElement("div");
      bodyBox.className = "body";
      bodyBox.innerHTML = inboxData.body;
      bodyBox.style.display = "none";
      senderBox.appendChild(bodyBox);

      var msgContent = document.getElementsByClassName("subject")
    for(var i = 0; i<msgContent.length; i++){
      msgContent[i].addEventListener("click", showBody);
    }

    function showBody(){
      var displayBody = this.querySelectorAll(".body")[0]
      if(displayBody.style.display === "none"){
        displayBody.style.display = "block"
      }else{
        displayBody.style.display = "none";
      }
    }

  
  }
 

 setInterval(addRandomMail, 3000);

    

    
   
    </script>
    
  </head>
  <body>
  <header>Gee-Mail Devleague Challenge</header>
   <nav class="topBox">
      <a href="inbox">NEW EMAIL</a>
      <a href="inbox">INBOX(<span id ="inboxCounter">0</span>)</a>
      <a href="inbox">SENT MAIL</a>
      <a href="inbox">DRAFTS</a>
      <a href="inbox">TRASH</a>
    </nav>
    <br>
<div class ="box" id="maybe">
 <span class="prettyDate">Date</span>

 <span class="prettySender">Sender</span>
 <span class="prettySubject">Subject</span>
 <br>
</div>
    <div class="container" id="main">
      
    </div>
   

    
  </body>
</html>